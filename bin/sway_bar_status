#!/bin/bash

get_date() {
	date +'%A %d %B %H:%M'
}

get_battery() {
	local percentage=$(cat /sys/class/power_supply/BAT0/capacity)
	local status=$(cat /sys/class/power_supply/BAT0/status)
	local battery_icon=""

	if [[ status = "Charging" ]]; then
		if [[ percentage -lt 10 ]]; then
			battery_icon="󰢟"
		elif [[ percentage -lt 20 ]]; then
			battery_icon="󰢜"
		elif [[ percentage -lt 30 ]]; then
			battery_icon="󰂆"
		elif [[ percentage -lt 40 ]]; then
			battery_icon="󰂇"
		elif [[ percentage -lt 50 ]]; then
			battery_icon="󰂈"
		elif [[ percentage -lt 60 ]]; then
			battery_icon="󰢝"
		elif [[ percentage -lt 70 ]]; then
			battery_icon="󰂉"
		elif [[ percentage -lt 80 ]]; then
			battery_icon="󰢞"
		elif [[ percentage -lt 90 ]]; then
			battery_icon="󰂊"
		elif [[ percentage -le 95 ]]; then
			battery_icon="󰂋"
		else
			battery_icon="󰂅"
		fi
	else
		if [[ percentage -lt 10 ]]; then
			battery_icon="󰂎"
		elif [[ percentage -lt 20 ]]; then
			battery_icon="󰁺"
		elif [[ percentage -lt 30 ]]; then
			battery_icon="󰁻"
		elif [[ percentage -lt 40 ]]; then
			battery_icon="󰁼"
		elif [[ percentage -lt 50 ]]; then
			battery_icon="󰁽"
		elif [[ percentage -lt 60 ]]; then
			battery_icon="󰁾"
		elif [[ percentage -lt 70 ]]; then
			battery_icon="󰁿"
		elif [[ percentage -lt 80 ]]; then
			battery_icon="󰂀"
		elif [[ percentage -lt 90 ]]; then
			battery_icon="󰂁"
		elif [[ percentage -le 95 ]]; then
			battery_icon="󰂂"
		else
			battery_icon="󰁹"
		fi
	fi

	echo "$battery_icon $percentage%"
}

while echo "$(get_battery) - $(get_date)"
do sleep 15; done
